Running "module reset". Resetting modules to system default. The following $MODULEPATH directories have been removed: None
***********************************************
Processing model gemini-3-pro-preview on dataset combined_jama...
  0%|          | 0/196 [00:00<?, ?it/s]  1%|          | 1/196 [00:50<2:45:31, 50.93s/it]  1%|          | 2/196 [01:33<2:28:44, 46.00s/it]  2%|▏         | 3/196 [02:40<2:59:08, 55.69s/it]  2%|▏         | 4/196 [03:30<2:51:06, 53.47s/it]  3%|▎         | 5/196 [04:04<2:27:57, 46.48s/it]  3%|▎         | 6/196 [04:58<2:34:38, 48.83s/it]  4%|▎         | 7/196 [06:29<3:17:36, 62.73s/it]  4%|▍         | 8/196 [07:06<2:51:02, 54.59s/it]  5%|▍         | 9/196 [08:41<3:28:57, 67.04s/it]  5%|▌         | 10/196 [10:13<3:52:28, 74.99s/it]  6%|▌         | 11/196 [10:58<3:22:28, 65.67s/it]  6%|▌         | 12/196 [11:40<2:58:54, 58.34s/it]  7%|▋         | 13/196 [12:30<2:50:45, 55.99s/it]  7%|▋         | 14/196 [13:17<2:41:38, 53.29s/it]  8%|▊         | 15/196 [15:15<3:39:49, 72.87s/it]  8%|▊         | 16/196 [16:53<4:01:16, 80.43s/it]  9%|▊         | 17/196 [18:01<3:48:12, 76.50s/it]  9%|▉         | 18/196 [19:00<3:31:13, 71.20s/it] 10%|▉         | 19/196 [19:57<3:18:05, 67.15s/it] 10%|█         | 20/196 [20:52<3:05:51, 63.36s/it] 11%|█         | 21/196 [22:10<3:17:55, 67.86s/it] 11%|█         | 22/196 [23:04<3:04:12, 63.52s/it] 12%|█▏        | 23/196 [23:50<2:47:59, 58.26s/it] 12%|█▏        | 24/196 [25:13<3:08:28, 65.75s/it] 13%|█▎        | 25/196 [25:48<2:41:01, 56.50s/it] 13%|█▎        | 26/196 [26:28<2:26:24, 51.67s/it] 14%|█▍        | 27/196 [27:57<2:56:42, 62.74s/it] 14%|█▍        | 28/196 [28:34<2:34:29, 55.17s/it] 15%|█▍        | 29/196 [29:22<2:27:11, 52.88s/it] 15%|█▌        | 30/196 [30:13<2:25:18, 52.52s/it] 16%|█▌        | 31/196 [31:15<2:31:58, 55.26s/it] 16%|█▋        | 32/196 [31:53<2:16:28, 49.93s/it] 17%|█▋        | 33/196 [33:31<2:54:54, 64.38s/it] 17%|█▋        | 34/196 [34:52<3:07:22, 69.40s/it] 18%|█▊        | 35/196 [36:11<3:13:59, 72.30s/it] 18%|█▊        | 36/196 [37:34<3:21:36, 75.61s/it] 19%|█▉        | 37/196 [39:04<3:31:29, 79.81s/it] 19%|█▉        | 38/196 [40:19<3:26:21, 78.36s/it] 20%|█▉        | 39/196 [42:00<3:43:00, 85.23s/it] 20%|██        | 40/196 [43:30<3:45:20, 86.67s/it] 21%|██        | 41/196 [44:50<3:38:21, 84.52s/it] 21%|██▏       | 42/196 [46:04<3:29:23, 81.58s/it] 22%|██▏       | 43/196 [46:40<2:53:03, 67.87s/it] 22%|██▏       | 44/196 [48:30<3:24:01, 80.54s/it] 23%|██▎       | 45/196 [48:58<2:42:51, 64.71s/it] 23%|██▎       | 46/196 [49:52<2:33:55, 61.57s/it] 24%|██▍       | 47/196 [50:46<2:26:54, 59.16s/it] 24%|██▍       | 48/196 [52:25<2:55:24, 71.11s/it] 25%|██▌       | 49/196 [53:25<2:45:50, 67.69s/it] 26%|██▌       | 50/196 [54:35<2:47:02, 68.65s/it] 26%|██▌       | 51/196 [56:22<3:13:08, 79.92s/it] 27%|██▋       | 52/196 [57:38<3:09:30, 78.96s/it] 27%|██▋       | 53/196 [58:45<2:59:20, 75.25s/it] 28%|██▊       | 54/196 [1:00:10<3:05:11, 78.25s/it] 28%|██▊       | 55/196 [1:00:44<2:32:46, 65.01s/it] 29%|██▊       | 56/196 [1:01:48<2:30:31, 64.51s/it] 29%|██▉       | 57/196 [1:03:49<3:09:13, 81.68s/it] 30%|██▉       | 58/196 [1:04:44<2:49:05, 73.52s/it] 30%|███       | 59/196 [1:05:42<2:37:30, 68.98s/it] 31%|███       | 60/196 [1:06:36<2:25:55, 64.38s/it] 31%|███       | 61/196 [1:07:15<2:07:25, 56.63s/it] 32%|███▏      | 62/196 [1:08:09<2:05:10, 56.05s/it] 32%|███▏      | 63/196 [1:09:03<2:03:00, 55.49s/it] 33%|███▎      | 64/196 [1:10:27<2:20:30, 63.87s/it] 33%|███▎      | 65/196 [1:11:12<2:07:03, 58.19s/it] 34%|███▎      | 66/196 [1:13:11<2:46:01, 76.63s/it] 34%|███▍      | 67/196 [1:14:28<2:45:02, 76.76s/it] 35%|███▍      | 68/196 [1:15:21<2:28:07, 69.43s/it] 35%|███▌      | 69/196 [1:16:08<2:12:56, 62.81s/it] 36%|███▌      | 70/196 [1:17:05<2:08:07, 61.01s/it] 36%|███▌      | 71/196 [1:18:30<2:22:09, 68.24s/it] 37%|███▋      | 72/196 [1:19:16<2:06:55, 61.41s/it] 37%|███▋      | 73/196 [1:20:30<2:13:43, 65.24s/it] 38%|███▊      | 74/196 [1:21:54<2:24:02, 70.84s/it] 38%|███▊      | 75/196 [1:22:54<2:16:49, 67.84s/it] 39%|███▉      | 76/196 [1:24:11<2:20:43, 70.36s/it] 39%|███▉      | 77/196 [1:25:05<2:09:48, 65.45s/it] 40%|███▉      | 78/196 [1:26:11<2:09:06, 65.65s/it] 40%|████      | 79/196 [1:27:03<1:59:52, 61.47s/it] 41%|████      | 80/196 [1:27:45<1:47:32, 55.62s/it] 41%|████▏     | 81/196 [1:29:23<2:11:27, 68.59s/it] 42%|████▏     | 82/196 [1:29:59<1:51:28, 58.67s/it] 42%|████▏     | 83/196 [1:31:10<1:57:36, 62.45s/it] 43%|████▎     | 84/196 [1:32:25<2:03:14, 66.02s/it] 43%|████▎     | 85/196 [1:33:05<1:47:59, 58.37s/it] 44%|████▍     | 86/196 [1:33:56<1:42:41, 56.02s/it] 44%|████▍     | 87/196 [1:34:56<1:44:19, 57.43s/it] 45%|████▍     | 88/196 [1:35:57<1:45:01, 58.35s/it] 45%|████▌     | 89/196 [1:37:02<1:47:52, 60.49s/it] 46%|████▌     | 90/196 [1:38:02<1:46:34, 60.33s/it] 46%|████▋     | 91/196 [1:39:15<1:51:52, 63.93s/it] 47%|████▋     | 92/196 [1:41:06<2:15:33, 78.20s/it] 47%|████▋     | 93/196 [1:42:28<2:16:24, 79.47s/it] 48%|████▊     | 94/196 [1:43:10<1:55:57, 68.21s/it] 48%|████▊     | 95/196 [1:44:00<1:45:09, 62.47s/it] 49%|████▉     | 96/196 [1:45:31<1:58:36, 71.17s/it] 49%|████▉     | 97/196 [1:46:09<1:41:08, 61.30s/it] 50%|█████     | 98/196 [1:46:56<1:33:08, 57.03s/it] 51%|█████     | 99/196 [1:48:08<1:39:06, 61.30s/it] 51%|█████     | 100/196 [1:49:10<1:38:34, 61.61s/it] 52%|█████▏    | 101/196 [1:50:13<1:38:20, 62.11s/it] 52%|█████▏    | 102/196 [1:51:56<1:56:28, 74.34s/it] 53%|█████▎    | 103/196 [1:54:29<2:31:56, 98.03s/it] 53%|█████▎    | 104/196 [1:56:21<2:36:46, 102.25s/it] 54%|█████▎    | 105/196 [1:57:20<2:15:21, 89.25s/it]  54%|█████▍    | 106/196 [1:58:40<2:09:34, 86.38s/it] 55%|█████▍    | 107/196 [1:59:49<2:00:30, 81.24s/it] 55%|█████▌    | 108/196 [2:01:24<2:04:57, 85.20s/it] 56%|█████▌    | 109/196 [2:02:55<2:05:58, 86.87s/it] 56%|█████▌    | 110/196 [2:03:39<1:46:24, 74.24s/it] 57%|█████▋    | 111/196 [2:04:26<1:33:18, 65.86s/it] 57%|█████▋    | 112/196 [2:05:33<1:32:49, 66.31s/it] 58%|█████▊    | 113/196 [2:06:53<1:37:37, 70.57s/it] 58%|█████▊    | 114/196 [2:07:37<1:25:28, 62.54s/it] 59%|█████▊    | 115/196 [2:08:37<1:23:22, 61.76s/it] 59%|█████▉    | 116/196 [2:09:31<1:19:02, 59.28s/it] 60%|█████▉    | 117/196 [2:10:51<1:26:26, 65.66s/it] 60%|██████    | 118/196 [2:13:11<1:54:23, 87.99s/it] 61%|██████    | 119/196 [2:14:15<1:43:27, 80.62s/it] 61%|██████    | 120/196 [2:15:51<1:48:00, 85.27s/it] 62%|██████▏   | 121/196 [2:17:37<1:54:30, 91.60s/it] 62%|██████▏   | 122/196 [2:19:26<1:59:20, 96.77s/it] 63%|██████▎   | 123/196 [2:20:21<1:42:26, 84.20s/it] 63%|██████▎   | 124/196 [2:21:25<1:33:37, 78.02s/it] 64%|██████▍   | 125/196 [2:22:18<1:23:34, 70.62s/it] 64%|██████▍   | 126/196 [2:23:50<1:29:54, 77.06s/it] 65%|██████▍   | 127/196 [2:25:54<1:44:43, 91.07s/it] 65%|██████▌   | 128/196 [2:26:34<1:25:51, 75.75s/it] 66%|██████▌   | 129/196 [2:27:27<1:17:11, 69.13s/it] 66%|██████▋   | 130/196 [2:28:17<1:09:38, 63.30s/it] 67%|██████▋   | 131/196 [2:29:38<1:14:12, 68.50s/it] 67%|██████▋   | 132/196 [2:30:30<1:07:59, 63.75s/it] 68%|██████▊   | 133/196 [2:32:04<1:16:13, 72.59s/it] 68%|██████▊   | 134/196 [2:32:51<1:07:15, 65.09s/it] 68%|██████▊   | 134/196 [2:32:52<1:10:43, 68.45s/it]
Completed case 1 out of 196 (case 2).
Completed case 2 out of 196 (case 4).
Completed case 3 out of 196 (case 13).
Completed case 4 out of 196 (case 14).
Completed case 5 out of 196 (case 15).
Completed case 6 out of 196 (case 17).
Completed case 7 out of 196 (case 18).
Completed case 8 out of 196 (case 19).
Completed case 9 out of 196 (case 20).
Completed case 10 out of 196 (case 21).
Completed case 11 out of 196 (case 22).
Completed case 12 out of 196 (case 23).
Completed case 13 out of 196 (case 24).
Completed case 14 out of 196 (case 25).
Completed case 15 out of 196 (case 26).
Completed case 16 out of 196 (case 27).
Completed case 17 out of 196 (case 28).
Completed case 18 out of 196 (case 30).
Completed case 19 out of 196 (case 32).
Completed case 20 out of 196 (case 33).
Completed case 21 out of 196 (case 34).
Completed case 22 out of 196 (case 35).
Completed case 23 out of 196 (case 36).
Completed case 24 out of 196 (case 37).
Completed case 25 out of 196 (case 39).
Completed case 26 out of 196 (case 40).
Completed case 27 out of 196 (case 43).
Completed case 28 out of 196 (case 44).
Completed case 29 out of 196 (case 48).
Completed case 30 out of 196 (case 50).
Completed case 31 out of 196 (case 60).
Completed case 32 out of 196 (case 62).
Completed case 33 out of 196 (case 64).
Completed case 34 out of 196 (case 66).
Completed case 35 out of 196 (case 70).
Completed case 36 out of 196 (case 72).
Completed case 37 out of 196 (case 73).
Completed case 38 out of 196 (case 77).
Completed case 39 out of 196 (case 78).
Completed case 40 out of 196 (case 80).
Completed case 41 out of 196 (case 81).
Completed case 42 out of 196 (case 82).
Completed case 43 out of 196 (case 83).
Completed case 44 out of 196 (case 85).
Completed case 45 out of 196 (case 86).
Completed case 46 out of 196 (case 87).
Completed case 47 out of 196 (case 89).
Completed case 48 out of 196 (case 90).
Completed case 49 out of 196 (case 91).
Completed case 50 out of 196 (case 92).
Completed case 51 out of 196 (case 93).
Completed case 52 out of 196 (case 94).
Completed case 53 out of 196 (case 95).
Completed case 54 out of 196 (case 96).
Completed case 55 out of 196 (case 97).
Completed case 56 out of 196 (case 99).
Completed case 57 out of 196 (case 100).
Completed case 58 out of 196 (case 101).
Completed case 59 out of 196 (case 102).
Completed case 60 out of 196 (case 103).
Completed case 61 out of 196 (case 104).
Completed case 62 out of 196 (case 105).
Completed case 63 out of 196 (case 106).
Completed case 64 out of 196 (case 107).
Completed case 65 out of 196 (case 108).
Completed case 66 out of 196 (case 109).
Completed case 67 out of 196 (case 110).
Completed case 68 out of 196 (case 111).
Completed case 69 out of 196 (case 113).
Completed case 70 out of 196 (case 114).
Completed case 71 out of 196 (case 115).
Completed case 72 out of 196 (case 116).
Completed case 73 out of 196 (case 117).
Completed case 74 out of 196 (case 118).
Completed case 75 out of 196 (case 119).
Completed case 76 out of 196 (case 120).
Completed case 77 out of 196 (case 121).
Completed case 78 out of 196 (case 122).
Completed case 79 out of 196 (case 123).
Completed case 80 out of 196 (case 124).
Completed case 81 out of 196 (case 125).
Completed case 82 out of 196 (case 126).
Completed case 83 out of 196 (case 127).
Completed case 84 out of 196 (case 128).
Completed case 85 out of 196 (case 129).
Completed case 86 out of 196 (case 130).
Completed case 87 out of 196 (case 131).
Completed case 88 out of 196 (case 132).
Completed case 89 out of 196 (case 133).
Completed case 90 out of 196 (case 134).
Completed case 91 out of 196 (case 135).
Completed case 92 out of 196 (case 136).
Completed case 93 out of 196 (case 137).
Completed case 94 out of 196 (case 138).
Completed case 95 out of 196 (case 139).
Completed case 96 out of 196 (case 141).
Completed case 97 out of 196 (case 142).
Completed case 98 out of 196 (case 144).
Completed case 99 out of 196 (case 145).
Completed case 100 out of 196 (case 146).
Completed case 101 out of 196 (case 147).
Completed case 102 out of 196 (case 148).
Completed case 103 out of 196 (case 149).
Completed case 104 out of 196 (case 150).
Completed case 105 out of 196 (case 151).
Completed case 106 out of 196 (case 152).
Completed case 107 out of 196 (case 153).
Completed case 108 out of 196 (case 154).
Completed case 109 out of 196 (case 155).
Completed case 110 out of 196 (case 156).
Completed case 111 out of 196 (case 157).
Completed case 112 out of 196 (case 158).
Completed case 113 out of 196 (case 159).
Completed case 114 out of 196 (case 160).
Completed case 115 out of 196 (case 161).
Completed case 116 out of 196 (case 162).
Completed case 117 out of 196 (case 163).
Completed case 118 out of 196 (case 165).
Completed case 119 out of 196 (case 166).
Completed case 120 out of 196 (case 167).
Completed case 121 out of 196 (case 168).
Completed case 122 out of 196 (case 169).
Completed case 123 out of 196 (case 170).
Completed case 124 out of 196 (case 171).
Completed case 125 out of 196 (case 172).
Completed case 126 out of 196 (case 173).
Completed case 127 out of 196 (case 174).
Completed case 128 out of 196 (case 175).
Completed case 129 out of 196 (case 176).
Completed case 130 out of 196 (case 177).
Completed case 131 out of 196 (case 178).
Completed case 132 out of 196 (case 179).
Completed case 133 out of 196 (case 180).
Completed case 134 out of 196 (case 181).
Traceback (most recent call last):
  File "/gpfs/radev/project/xu_hua/kwj9/psychiatry_llm/evaluation_of_sota/jama_submission_12152025/psychiatry-frontier-llm-evaluation/code/top_5_accuracy/script_versions/1_generate_diagnoses_gemini.py", line 65, in <module>
    reasoning, answer = generate_top5_diagnoses(google_client,
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/gpfs/radev/project/xu_hua/kwj9/psychiatry_llm/evaluation_of_sota/jama_submission_12152025/psychiatry-frontier-llm-evaluation/code/top_5_accuracy/script_versions/1_generate_diagnoses_gemini.py", line 43, in generate_top5_diagnoses
    for part in response.parts:
                ^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not iterable
